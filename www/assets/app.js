var monologue,bitcoinPrice,dayOfWeek,body=document.body,html=document.documentElement,cursor=document.getElementById("cursor"),monologueContainer=document.getElementById("monologueContainer"),fullscreenContainer=document.getElementById("fullscreenContainer"),buyNowButtonContainer=document.getElementById("buyNowButtonContainer"),whiteLoadingScreen=document.getElementById("whiteLoadingScreen"),playVideo=document.getElementById("playVideo"),backgroundText=document.getElementById("backgroundText"),encryption=document.getElementById("encryption"),siteNoticeContainer=document.getElementById("siteNoticeContainer"),captionToggle=document.getElementById("captionToggle"),shareOnTwitter=document.getElementById("shareOnTwitter"),aslVideoHappened=!1,captionContainer=document.getElementById("captionContainer"),windowWidth=Math.max(document.documentElement.clientWidth,window.innerWidth||0),windowHeight=Math.max(document.documentElement.clientHeight,window.innerHeight||0);

console.log("Design and development by Gabe Ferreira");
function createVideo(){monologue=document.createElement("video"),monologue.id="monologue";var e=document.createElement("source");e.type="video/mp4",e.src="assets/video/immersive-video.mp4",monologue.setAttribute("webkit-playsinline","webkit-playsinline"),monologue.setAttribute("playsinline","playsinline"),monologue.appendChild(e),monologue.addEventListener("click",function(){monologue.classList.contains("loaded")&&(monologue.play(),monologue.classList.add("playing"))}),monologueContainer.appendChild(monologue),monologue.load()}function turnBackgroundBlack(){body.classList.add("blackBackground")}function growVideoPlayer(){monologueContainer.classList.add("larger")}function spinVideoPlayer(){monologueContainer.classList.add("spin"),monologueContainer.addEventListener("animationend",function(){monologueContainer.classList.remove("spin")})}function turnBackgroundYellow(){backgroundText.classList.add("disappear"),body.classList.add("yellowBackground"),body.classList.remove("blackBackground")}function shakeTheScreen(){body.classList.add("shake"),body.addEventListener("animationend",function(){body.classList.remove("shake")})}function displayBuyNowButtons(){buyNowButtonContainer.classList.add("loaded"),buyNowButtonContainer.classList.add("active")}function hideBuyNowButtons(){buyNowButtonContainer.classList.remove("active")}function blurTheVideo(){monologue.classList.add("blurred")}function encryptTheScreen(){encryption.classList.add("visible"),setTimeout(function(){body.classList.remove("yellowBackground"),monologue.classList.remove("blurred"),monologueContainer.classList.remove("larger")},1e3)}function disableEncryptedScreen(){encryption.classList.add("hidden")}function getBitcoinPrice(){var e=new XMLHttpRequest;e.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var e=JSON.parse(this.responseText);bitcoinPrice=e.bpi.USD.rate.slice(0,-2)}},e.open("GET","https://api.coindesk.com/v1/bpi/currentprice.json",!0),e.send()}setTimeout(function(){backgroundText.classList.add("loaded")},1e3),createVideo(),setTimeout(function(){monologueContainer.className="loaded",cursor.classList.add("loaded"),siteNoticeContainer.classList.add("loaded"),captionToggle.classList.add("loaded")},4e3),captionToggle.addEventListener("click",function(){captionToggle.classList.toggle("on"),captionContainer.classList.toggle("visible")}),monologue.addEventListener("timeupdate",function(){26<monologue.currentTime&&monologue.currentTime<27&&turnBackgroundBlack(),32<monologue.currentTime&&monologue.currentTime<33&&growVideoPlayer(),38<monologue.currentTime&&monologue.currentTime<39&&spinVideoPlayer(),44<monologue.currentTime&&monologue.currentTime<45&&turnBackgroundYellow(),48<monologue.currentTime&&monologue.currentTime<49&&shakeTheScreen(),61<monologue.currentTime&&monologue.currentTime<62&&displayBuyNowButtons(),66<monologue.currentTime&&monologue.currentTime<67&&hideBuyNowButtons(),72<monologue.currentTime&&monologue.currentTime<73&&blurTheVideo(),82<monologue.currentTime&&monologue.currentTime<83&&encryptTheScreen(),87<monologue.currentTime&&monologue.currentTime<88&&disableEncryptedScreen(),96<monologue.currentTime&&monologue.currentTime<97&&displayRealTimeData(),126<monologue.currentTime&&monologue.currentTime<127&&pauseTheVideo(),142<monologue.currentTime&&monologue.currentTime<143&&showAslVideo()}),monologue.addEventListener("ended",function(){endOfVideo()}),getBitcoinPrice();var displayRealTimeData=function(){var o=!1;return function(){if(!o){o=!0;var e=document.createElement("div");e.id="realTimeData",e.textContent="1 BTC is now worth $"+bitcoinPrice+".",body.appendChild(e),setTimeout(function(){e.classList.add("active")},500)}}}(),pauseTheVideo=function(){var e=!1;return function(){e||(e=!0,monologue.pause(),body.classList.add("pauseJoke"),setTimeout(function(){body.classList.remove("pauseJoke"),monologue.play()},3500))}}();function endOfVideo(){shareOnTwitter.classList.add("active"),cursor.classList.remove("pause"),cursor.classList.add("reload"),captionContainer.textContent=""}function showAslVideo(){if(!aslVideoHappened){aslVideoHappened=!0;var e=document.createElement("video");e.id="aslVideo";var o=document.createElement("source");o.type="video/mp4",o.src="assets/video/asl.mp4",e.setAttribute("webkit-playsinline","webkit-playsinline"),e.setAttribute("playsinline","playsinline"),e.appendChild(o),fullscreenContainer.appendChild(e),e.load(),e.play(),e.addEventListener("ended",function(){body.classList.remove("showingAslVideo"),setTimeout(function(){e.parentElement.removeChild(e)},1e3)}),setTimeout(function(){body.classList.add("showingAslVideo")},250)}}
function updateCursorPosition(e){scrollTop=void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop,cursorLeft=e.pageX+"px",cursorTop=e.pageY-scrollTop+"px",cursor.style.top=cursorTop,cursor.style.left=cursorLeft}document.addEventListener("mousemove",function(e){updateCursorPosition(e)}),setTimeout(function(){document.addEventListener("click",function(e){if(cursor.classList.contains("pause")){if(body.classList.contains("pauseJoke")||"captionToggle"===e.target.id||"shareOnTwitter"===e.target.id)return;cursor.classList.remove("pause"),cursor.classList.add("play"),monologue.pause(),body.classList.add("videoIsPaused"),document.getElementById("aslVideo")?aslVideo.pause():console.log("there is no asl Video")}else if(cursor.classList.contains("play")){if(e.target.classList.contains("siteNotice")||"captionToggle"===e.target.id||"shareOnTwitter"===e.target.id)return;cursor.classList.add("pause"),cursor.classList.remove("play"),monologue.play(),body.classList.remove("videoIsPaused"),document.getElementById("aslVideo")?aslVideo.play():console.log("there is no asl Video")}else{if(e.target.classList.contains("siteNotice")||"captionToggle"===e.target.id||"shareOnTwitter"===e.target.id)return;cursor.classList.remove("pause"),cursor.classList.add("reload"),whiteLoadingScreen.classList.add("active"),whiteLoadingScreen.addEventListener("animationend",function(){location.reload()})}})},4e3);
for(var captionCues=[{time:0,text:"Today, we experience the moving image in a"},{time:5,text:"relatively small rectangle on the screen,"},{time:9,text:"often displayed alongside ads, comments, and "},{time:13.5,text:"suggestions of other videos."},{time:18,text:"Video sharing platforms are indifferent to ambiance"},{time:23,text:"but it doesn’t necessarily have to be that way!"},{time:28,text:"Imagine a media player that could grow in order to emphasize"},{time:36,text:"a specific moment in a story,"},{time:38,text:"spin around to get your point across,"},{time:42,text:"change the website’s background color"},{time:45,text:"to reflect a brighter tone"},{time:47.5,text:"or even shake the screen"},{time:50,text:"and keep your audience focused on the video."},{time:54,text:"Yes, that would be great!"},{time:56,text:"If you happen to be selling a product,"},{time:59,text:"you could fill up the website with “Buy Now” buttons,"},{time:64,text:"and, once those buttons are gone, you could remind"},{time:67.5,text:"your audience that purchasing something on your website"},{time:71.5,text:"is a private, safe affair."},{time:75,text:"In fact, you could go even further, and announce that"},{time:79,text:"the entire experience is encrypted,"},{time:83,text:"so you’ll never really know what’s happening behind the scenes."},{time:89,text:"Selling is not the only thing you can do on the internet."},{time:93,text:"You can also inform."},{time:97,text:"The problem with using video to inform is that, well,"},{time:100.5,text:"videos, by nature of the medium, are stuck in time."},{time:105,text:"This additional layer that I’m proposing"},{time:108.5,text:"could pull in real-time information"},{time:111.5,text:"to complement the message you are trying to convey."},{time:117.5,text:"I’m personally excited about having fun with this idea,"},{time:123,text:"Perhaps by messing around with viewers"},{time:127,text:"pausing the video at random times"},{time:129,text:"and then, making them... well,"},{time:132.5,text:"think that their internet connection went down!"},{time:136,text:"Similar to what happened in the Sopranos finale!"},{time:140,text:"Hahahahahaha!"},{time:143,text:""},{time:185,text:"This is a nascent idea,"},{time:187,text:"and I hope it inspires others to ditch"},{time:190,text:"the race for algorithmic relevance"},{time:194,text:"and pursue genuinely intriguing experiences"},{time:197,text:"for internet users all around."}],_loop=function(e){monologue.addEventListener("timeupdate",function(){monologue.currentTime>captionCues[e].time&&monologue.currentTime<captionCues[e].time+1&&(captionContainer.textContent=captionCues[e].text)})},i=0;i<captionCues.length;i++)_loop(i);