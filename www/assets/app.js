var monologue,body=document.body,html=document.documentElement,cursor=document.getElementById("cursor"),monologueContainer=document.getElementById("monologueContainer"),fullscreenContainer=document.getElementById("fullscreenContainer"),buyNowButtonContainer=document.getElementById("buyNowButtonContainer"),windowWidth=Math.max(document.documentElement.clientWidth,window.innerWidth||0),windowHeight=Math.max(document.documentElement.clientHeight,window.innerHeight||0);

console.log("Development by Gabe Ferreira");
var bitcoinPrice,dayOfWeek,playVideo=document.getElementById("playVideo"),backgroundText=document.getElementById("backgroundText"),encryption=document.getElementById("encryption"),siteNoticeContainer=document.getElementById("siteNoticeContainer"),captionToggle=document.getElementById("captionToggle");function createVideo(){monologue=document.createElement("video"),monologue.id="monologue";var e=document.createElement("source");e.type="video/mp4",e.src="assets/video/immersive-video.mp4",monologue.appendChild(e),monologue.addEventListener("click",function(){monologue.classList.contains("loaded")&&(monologue.play(),monologue.classList.add("playing"))}),monologueContainer.appendChild(monologue),monologue.load(),monologue.addEventListener("loadedmetadata",function(){track=document.createElement("track"),track.kind="captions",track.label="English",track.srclang="en",track.src="assets/video/captions.vtt",this.appendChild(track)})}function turnBackgroundBlack(){body.classList.add("blackBackground")}function growVideoPlayer(){monologueContainer.classList.add("larger")}function spinVideoPlayer(){monologueContainer.classList.add("spin"),monologueContainer.addEventListener("animationend",function(){monologueContainer.classList.remove("spin")})}function turnBackgroundYellow(){backgroundText.classList.add("disappear"),body.classList.add("yellowBackground"),body.classList.remove("blackBackground")}function shakeTheScreen(){body.classList.add("shake"),body.addEventListener("animationend",function(){body.classList.remove("shake")})}function displayBuyNowButtons(){buyNowButtonContainer.classList.add("loaded"),buyNowButtonContainer.classList.add("active")}function hideBuyNowButtons(){buyNowButtonContainer.classList.remove("active")}function blurTheVideo(){monologue.classList.add("blurred")}function encryptTheScreen(){encryption.classList.add("visible"),setTimeout(function(){body.classList.remove("yellowBackground"),monologue.classList.remove("blurred"),monologueContainer.classList.remove("larger")},1e3)}function disableEncryptedScreen(){encryption.classList.add("hidden")}function getBitcoinPrice(){var e=new XMLHttpRequest;e.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var e=JSON.parse(this.responseText);bitcoinPrice=e.bpi.USD.rate.slice(0,-2)}},e.open("GET","https://api.coindesk.com/v1/bpi/currentprice.json",!0),e.send()}function determineIfItIsFriday(){var e=new Date;return dayOfWeek=e.getDay()}backgroundText.textContent="A proposal for immersive video on the web",setTimeout(function(){backgroundText.classList.add("loaded")},1e3),createVideo(),setTimeout(function(){monologueContainer.className="loaded",cursor.classList.add("loaded"),siteNoticeContainer.classList.add("loaded"),captionToggle.classList.add("loaded")},4e3),captionToggle.addEventListener("click",function(){captionToggle.classList.toggle("on"),captionToggle.classList.contains("on")?monologue.textTracks[0].mode="showing":monologue.textTracks[0].mode="hidden"}),monologue.addEventListener("timeupdate",function(){console.log(monologue.currentTime),26<monologue.currentTime&&monologue.currentTime<27&&turnBackgroundBlack(),32<monologue.currentTime&&monologue.currentTime<33&&growVideoPlayer(),38<monologue.currentTime&&monologue.currentTime<39&&spinVideoPlayer(),44<monologue.currentTime&&monologue.currentTime<45&&turnBackgroundYellow(),48<monologue.currentTime&&monologue.currentTime<49&&shakeTheScreen(),61<monologue.currentTime&&monologue.currentTime<62&&displayBuyNowButtons(),66<monologue.currentTime&&monologue.currentTime<67&&hideBuyNowButtons(),72<monologue.currentTime&&monologue.currentTime<73&&blurTheVideo(),82<monologue.currentTime&&monologue.currentTime<83&&encryptTheScreen(),87<monologue.currentTime&&monologue.currentTime<88&&disableEncryptedScreen(),96<monologue.currentTime&&monologue.currentTime<97&&displayRealTimeData(),126<monologue.currentTime&&monologue.currentTime<127&&pauseTheVideo()}),getBitcoinPrice();var displayRealTimeData=function(){var o=!1;return function(){if(!o){o=!0,determineIfItIsFriday();var e=document.createElement("div");e.id="realTimeData",e.textContent="1 BTC is now worth $"+bitcoinPrice+".",body.appendChild(e),setTimeout(function(){e.classList.add("active")},500)}}}(),pauseTheVideo=function(){var e=!1;return function(){e||(e=!0,monologue.pause(),body.classList.add("pauseJoke"),setTimeout(function(){body.classList.remove("pauseJoke"),monologue.play()},4500))}}();
function updateCursorPosition(o){scrollTop=void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop,cursorLeft=o.pageX+"px",cursorTop=o.pageY-scrollTop+"px",cursor.style.top=cursorTop,cursor.style.left=cursorLeft}document.addEventListener("mousemove",function(o){updateCursorPosition(o)}),setTimeout(function(){document.addEventListener("click",function(o){if(cursor.classList.contains("pause")){if(body.classList.contains("pauseJoke")||"captionToggle"===o.target.id)return;cursor.classList.remove("pause"),monologue.pause(),body.classList.add("videoIsPaused")}else{if(o.target.classList.contains("siteNotice")||"captionToggle"===o.target.id)return;cursor.classList.add("pause"),monologue.play(),body.classList.remove("videoIsPaused")}})},4e3);